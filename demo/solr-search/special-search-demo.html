<html no-ng-app="ssDemo">
  <head>
    <title>Demo Special Search Page</title>

    <link rel='stylesheet' href='/bower_components/bootstrap/dist/css/bootstrap.min.css'/>
    <link rel='stylesheet' href='/bower_components/font-awesome/css/font-awesome.css'/>

    <link rel='stylesheet' href='/bower_components/jquery-ui/themes/base/jquery-ui.css'/>
    <link rel='stylesheet' href='/bower_components/jquery-ui-bootstrap/jquery.ui.theme.css'/>

    <script src='/bower_components/jquery/dist/jquery.min.js'></script>
    <script src='/bower_components/jquery-ui/jquery-ui.min.js'></script>
    <script src='/bower_components/bootstrap/dist/js/bootstrap.min.js'></script>
    <script src='/bower_components/angular/angular.min.js'></script>

    <script src='/src/search/searchStrap.js'></script>
    <script>
// this will replace the code in controller.js
//var simpleTest = angular.module('ssDemo', []);

jQuery(document).ready(function($) {

    $('#search-input').searchStrap({
        //searchUrl: 'http://gsddtovsdvap014.cihs.gov.on.ca/wp-admin/admin-ajax.php?callback=?&action=opspedia_advanced_search',
        searchUrl: 'http://intra.net.gov.on.ca/wp-admin/admin-ajax.php?callback=?&action=opspedia_advanced_search',
        //searchUrl: '/advancedsearch',
        itemsPerPage: 18,
        // we don't need search button here.
        fq: 'site: wiki AND keywords: Acronyms',
        //fq: 'keywords: "User Profile"',
        //searchButton: 'sizing-addon',
        facet: {
            facetField: ['authors']
        },
        resultSelector: '#result-list',
        resultTemplate: 'AcronymsList',
        panelFunction: acronymPanelStripper,
        autoReload: false
    });
});

var simpleColumnBuilder = function(item) {

    var panel = '<div class="col-sm-3">' + 
        '<h2><a href="' + item['url'] + '">' +
        item['title'] + '</a></h2>' +
        '<p>' + item['description'] + '</p>' + 
        '</div>';
    return panel;
};

/**
 * builder function to strip out all wiki syntax.
 */
var acronymPanelStripper = function(acronym) {

    // try to remove some wiki markups.
    var desc = acronym['description'];
    // replace wiki syntax.
    var text = desc
       .replace(/.*may refer to:/g, '')
       .replace(/\[http.*/g, '')
       .replace(/\[\[Category:.*/g, '')
       .replace(/[\]\[\']/g, '')
       .replace(/\*/, '<ul><li>')
       .replace(/\*/g, '</li><li>');

    var panel = '<div class="col-sm-3">' + 
        '<h2 class="text-center">' +
        '<a href="' + acronym['url'] + '">' +
        acronym['title'] + '</a></h2>' +
        '<p>' + text + '</li></ul></p>' + 
        '</div>';
    return panel;
};
    </script>
  </head>

  <body>
    <!-- Main jumbotron for a primary marketing message or call to action -->
    <div class="jumbotron">
      <div class="container">
        <h1>
          <img src="https://www.ontario.ca/img/favicon.png" alt="..." class="img-rounded">
          OPS Acronyms
        </h1>
        <p>The following is a partial list of acronyms used throughout the <a href="http://intra.net.gov.on.ca/wiki/Ontario_Public_Service">Ontario Public Service</a>. This list is incomplete, and you can help!
        </p>

      </div>
    </div>

    <div class="container">
      <!-- Search bar -->
      <div class="container container-fluid bg-muted">
      <div class="row" id="search-bar">
        <div class="col-md-2">
        </div>

        <div class="col-md-8">
          <div class="input-group input-group-lg"
               role="group" aria-label="...">
            <span class="input-group-addon">
              <i class="fa fa-search text-primary"></i>
            </span>
            <input type="text" class="form-control"
                   placeholder="Find Acronyms"
                   id="search-input"
                   aria-describedby="sizing-addon"/>
          </div>
          <div class="text-muted text-center h4" id="search-info">
            <h2>Loading...</h2>
          </div>
        </div>

        <div class="col-md-2">
        </div>
      </div>
      </div>

      <!-- Example row of columns -->
      <div class="container container-fluid" id="result-list">
      </div>

      <div class="container container-fluid">
      <hr>
      <footer>
        <p>&copy; 2016 Company, Inc.</p>
      </footer>
      </div>
    </div> <!-- /container -->
  </body>
</html>
